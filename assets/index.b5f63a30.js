var e,t,n=Object.defineProperty,o=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,o)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,i=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&c(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&c(e,n,t[n]);return e},p=(e,t)=>o(e,r(t)),u=(e,t)=>{var n={};for(var o in e)s.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&a)for(var o of a(e))t.indexOf(o)<0&&l.call(e,o)&&(n[o]=e[o]);return n};import{a as d,i as m,B as h,b as f,c as g,R as x,s as w,f as y,u as b,r as E,G as _,Q as v,d as C,e as k,g as N,h as L,X as S,E as R,j as P,k as O,l as I,T,M as U,m as A,y as j,F as D,n as M,o as B,p as $,q as z,t as W,H as J,I as F,S as q,v as V,w as G,x as H,z as K,A as Q}from"./vendor.57c26bf4.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Y={shadowsocks:"Shadowsocks",select:"Selector"},Z=(e,t,n)=>{const o=e[t];if("function"!=typeof o)throw new Error(`${t} is not a function`);e[t]=function(...e){return n.call(this,{origin:o,next:()=>o.apply(this,e)},...e)}},X=e=>{const t=e.lastIndexOf(":");if(-1===t)throw new TypeError("Invalid address");return{host:e.slice(0,t),port:e.slice(t+1)}},ee=new WeakMap,te=new WeakMap,ne=new WeakMap,oe=WebSocket,re=e=>({downloadTotal:e.total_download,uploadTotal:e.total_upload,connections:Object.entries(e.connections).map((([e,{protocol:t,ctx:n,addr:o,upload:r,download:a,start_time:s}])=>{const l=n.src_socket_addr?X(n.src_socket_addr):{host:"N",port:"A"},c=X(o),[i,...p]=n.net_list;return{id:e,upload:r,download:a,start:new Date(1e3*s).toUTCString(),chains:p.reverse(),metadata:{network:t,type:i,sourceIP:l.host,sourcePort:l.port,destinationIP:c.host,destinationPort:c.port,host:n.dest_domain?X(n.dest_domain).host:c.host},rule:"RabbitDigger"}}))}),ae=e=>Object.keys(e).length>0?JSON.stringify(e):0;window.WebSocket=new Proxy(oe,{construct(e,[t,n]){const o=new URL(t);let r;"/connections"===o.pathname&&(o.pathname="/api/stream/connection",o.search="?patch=true",r="connections"),"/traffic"===o.pathname&&(o.pathname="/api/stream/connection",o.search="?without_connections=true",r="traffic"),"/logs"===o.pathname&&(o.pathname="/api/stream/logs",r="logs");const a=new e(o,n);return ee.set(a,r),a}}),Z(oe.prototype,"addEventListener",(function({next:e,origin:t},n,o){const{pathname:r}=new URL(this.url);return"/api/stream/connection"===r&&"message"===n?t.call(this,"message",(e=>{if("function"==typeof o)if("connections"===ee.get(this)){const t=((e,t)=>{const n=te.get(e);let o;if(t.patch&&n)o=d(n,t.patch).newDocument;else{if(!t.full)throw console.log(t,n),new TypeError("Wrong state");o=t.full}return te.set(e,o),re(o)})(this,JSON.parse(e.data));o({data:JSON.stringify(t)})}else if("traffic"===ee.get(this)){const t=((e,t)=>{const n=te.get(e);let o;if(t.patch&&n)o=d(n,t.patch).newDocument;else{if(!t.full)throw console.log(t,n),new TypeError("Wrong state");o=t.full}te.set(e,o);const r=ne.get(e);return ne.set(e,{total_download:o.total_download,total_upload:o.total_upload}),r?{up:o.total_upload-r.total_upload,down:o.total_download-r.total_download}:{up:0,down:0}})(this,JSON.parse(e.data));o({data:JSON.stringify(t)})}})):"/api/stream/logs"===r&&"message"===n?t.call(this,"message",(e=>{if("function"==typeof o&&"logs"===ee.get(this)){const t=(e=>{var t=e,{level:n,fields:o}=t,r=o,{message:a}=r,s=u(r,["message"]),{target:l,span:c}=t,i=c,{name:p}=i,d=u(i,["name"]);return{type:n,payload:`${p}${ae(d)}: ${l}: ${a} ${ae(s)}`}})(JSON.parse(e.data));console.log("clash log",t),o({data:JSON.stringify(t)})}})):e()}));const se=e=>{const t=i({},e.net);return t.local||(t.local={type:"local"}),t.noop||(t.noop={type:"noop"}),Object.fromEntries(Object.entries(t).map((([e,t])=>{const{type:n}=t;return"select"===t.type?{name:e,type:"Selector",history:[],all:t.list,now:t.selected}:{name:e,type:Y[n]||n,history:[]}})).map((e=>[e.name,e])))},le=new Map,ce=[{test:e=>"/configs"===new URL(e).pathname,replace:async()=>JSON.stringify({port:0,"socks-port":0,"redir-port":0,"tproxy-port":0,"mixed-port":114514,authentication:[],"allow-lan":!1,"bind-address":"*",mode:"rule","log-level":"silent",ipv6:!1})},{test:e=>"/rules"===new URL(e).pathname,replace:async()=>JSON.stringify({rules:[{type:"Match",payload:"RabbitDigger规则不支持查看",proxy:"RabbitDigger"}]})},{test:e=>"/proxies"===new URL(e).pathname,replace:async e=>{const t=new URL(e);t.pathname="/api/config";const n=await(await fetch(t.toString())).json();le.set(t.origin,n);const o={proxies:se(n)};return console.log("proxies",o),JSON.stringify(o)}},{test:(e,t)=>"DELETE"===t&&new URL(e).pathname.startsWith("/connections"),replace:async e=>{const t=new URL(e);return t.pathname=t.pathname.replace("/connections","/api/connection"),await fetch(t.toString(),{method:"DELETE"}),""}},{test:e=>"/connections"===new URL(e).pathname,replace:async e=>{const t=new URL(e);t.pathname="/api/connection";const n=re(await(await fetch(t.toString())).json());return JSON.stringify(n)}},{test:e=>"/providers/proxies"===new URL(e).pathname,replace:async e=>{const t=new URL(e);t.pathname="/api/config";const n=await(await fetch(t.toString())).json(),o=se(n),r=Object.values(o).filter((e=>"Selector"===e.type)),a={providers:i({default:{name:"default",proxies:Object.values(o),type:"Proxy",vehicleType:"Compatible"}},Object.fromEntries(r.map((e=>[e.name,{name:e.name,proxies:e.all.map((e=>o[e])),type:"Proxy",vehicleType:"Compatible"}]))))};return console.log("providers",a,r),JSON.stringify(a)}},{test:(e,t)=>"PUT"===t&&/\/proxies\/(.*)/.test(e),replace:async(e,t)=>{const{name:n}=JSON.parse(t),o=/\/proxies\/(.*)/.exec(e)[1],r=new URL(e);if("select"!==le.get(r.origin).net[o].type)throw new Error("select not select");return r.pathname=`/api/net/${encodeURIComponent(o)}`,await fetch(r.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selected:n})}),""}},{test:e=>/\/proxies\/(.*)\/delay/.test(e),replace:async e=>{const t=/\/proxies\/(.*)\/delay/.exec(e)[1],n=new URL(e);n.pathname=`/api/net/${encodeURIComponent(t)}/delay`;const o=await(await fetch(n.toString())).json();return JSON.stringify({delay:o.response})}}];Z(window,"fetch",(async({next:e},t,{method:n,body:o}={})=>{if("string"==typeof t)for(const{test:r,replace:a}of ce)if(r(t,n))return new Response(await a(t,o));return await e()}));const ie={},pe=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./${e}`)in ie)return;ie[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},ue={zh:pe((()=>import("./zh.d85002f6.js")),[]),en:pe((()=>import("./en.41adc249.js")),[])};m.use(h).use(f).use(g).init({debug:!1,backend:{loadPath:"/__{{lng}}/{{ns}}.json",request:function(e,t,n,o){let r;switch(t){case"/__zh/translation.json":case"/__zh-CN/translation.json":r=ue.zh;break;case"/__en/translation.json":default:r=ue.en}r&&r.then((e=>{o(null,{status:200,data:e.data})}))}},supportedLngs:["en","zh"],fallbackLng:"en",interpolation:{escapeValue:!1}});function de(e){return e.replace(/\/$/,"")}function me(e,t){let n=String(e);for(;n.length<t;)n="0"+n;return n}const he={"Content-Type":"application/json"};function fe(e,t,n){const o="?"+t.toString(),r=new URL(e);return"https:"===r.protocol?r.protocol="wss:":r.protocol="ws:",`${de(r.href)}${n}${o}`}function ge({baseURL:e,secret:t}){return{url:e,init:{headers:function({secret:e}){const t=i({},he);return e&&(t.Authorization=`Bearer ${e}`),t}({secret:t})}}}function xe(e,t){const{baseURL:n,secret:o}=e;return fe(n,new URLSearchParams({token:o}),t)}function we(e,t){const{baseURL:n,secret:o,logLevel:r}=e;return fe(n,new URLSearchParams({token:o,level:r}),t)}var ye="_root_1o14m_1",be="_h1_1o14m_7";var Ee=x.memo((function({title:e}){return x.createElement("div",{className:ye},x.createElement("h1",{className:be},e))}));w(!1);const{createContext:_e,memo:ve,useMemo:Ce,useRef:ke,useEffect:Ne,useCallback:Le,useContext:Se,useState:Re}=x,Pe=_e(null),Oe=_e(null),Ie=_e(null);function Te(){return Se(Ie)}function Ue({initialState:e,actions:t={},children:n}){const o=ke(e),[r,a]=Re(e),s=Le((()=>o.current),[]);Ne((()=>{}),[s]);const l=Le(((e,t)=>{if("function"==typeof e)return e(l,s);const n=y(s(),t);n!==o.current&&(o.current=n,a(n))}),[s]),c=Ce((()=>De(t,l)),[t,l]);return x.createElement(Pe.Provider,{value:r},x.createElement(Oe.Provider,{value:l},x.createElement(Ie.Provider,{value:c},n)))}function Ae(e){return t=>{const n=ve(t);return function(t){const o=Se(Pe),r=Se(Oe),a=e(o,t),s=i(i({dispatch:r},t),a);return x.createElement(n,i({},s))}}}function je(e,t){return function(...n){return t(e.apply(this,n))}}function De(e,t){const n={};for(const o in e){const r=e[o];"function"==typeof r?n[o]=je(r,t):"object"==typeof r&&(n[o]=De(r,t))}return n}function Me(e){try{const t=JSON.stringify(e);localStorage.setItem("yacd.haishan.me",t)}catch(t){}}async function Be(e){const{url:t,init:n}=ge(e);return await fetch(t+"/configs",n)}const $e=new TextDecoder("utf-8"),ze={labels:Array(150),up:Array(150),down:Array(150),size:150,subscribers:[],appendData(e){this.up.push(e.up),this.down.push(e.down);const t=new Date,n=""+t.getMinutes()+t.getSeconds();this.labels.push(n),this.up.length>this.size&&this.up.shift(),this.down.length>this.size&&this.down.shift(),this.labels.length>this.size&&this.labels.shift(),this.subscribers.forEach((t=>t(e)))},subscribe(e){return this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}}};let We,Je=!1,Fe="";function qe(e){ze.appendData(JSON.parse(e))}function Ve(e){return e.read().then((({done:t,value:n})=>{const o=$e.decode(n,{stream:!t});Fe+=o;const r=Fe.split("\n"),a=r[r.length-1];for(let e=0;e<r.length-1;e++)qe(r[e]);return t?(qe(a),Fe="",console.log("GET /traffic streaming done"),void(Je=!1)):(Fe=a,Ve(e))}))}function Ge(e){if(Je||1===We)return ze;We=1;const t=xe(e,"/traffic"),n=new WebSocket(t);return n.addEventListener("error",(function(e){We=3})),n.addEventListener("close",(function(t){We=3,function(e){if(Je)return ze;Je=!0;const{url:t,init:n}=ge(e);fetch(t+"/traffic",n).then((e=>{if(e.ok){Ve(e.body.getReader())}else Je=!1}),(e=>{console.log("fetch /traffic error",e),Je=!1}))}(e)})),n.addEventListener("message",(function(e){qe(e.data)})),ze}function He(e){return t=>{t(`openModal:${e}`,(t=>{t.modals[e]=!0}))}}const Ke=e=>e.configs.configs,Qe=e=>e.configs.configs["log-level"];function Ye(e){return async(t,n)=>{let o;try{o=await Be(e)}catch(a){return void t(He("apiConfig"))}if(!o.ok)return console.log("Error fetch configs",o.statusText),void t(He("apiConfig"));const r=await o.json();t("store/configs#fetchConfigs",(e=>{e.configs.configs=r}));n().configs.haveFetchedConfig?Ge(e):t((e=>{e("store/configs#markHaveFetchedConfig",(e=>{e.configs.haveFetchedConfig=!0}))}))}}function Ze(e,t){return async n=>{(async function(e,t){const{url:n,init:o}=ge(e),r=JSON.stringify(function(e){return"socks-port"in e&&(e["socket-port"]=e["socks-port"]),e}(t));return await fetch(n+"/configs",p(i({},o),{body:r,method:"PATCH"}))})(e,t).then((e=>{!1===e.ok&&console.log("Error update configs",e.statusText)}),(e=>{throw console.log("Error update configs",e),e})).then((()=>{n(Ye(e))})),n("storeConfigsOptimisticUpdateConfigs",(e=>{e.configs.configs=i(i({},e.configs.configs),t)}))}}const Xe=e=>{const t=e.app.selectedClashAPIConfigIndex;return e.app.clashAPIConfigs[t]},et=e=>e.app.selectedClashAPIConfigIndex,tt=e=>e.app.clashAPIConfigs,nt=e=>e.app.theme,ot=e=>e.app.selectedChartStyleIndex,rt=e=>e.app.latencyTestUrl,at=e=>e.app.collapsibleIsOpen,st=e=>e.app.proxySortBy,lt=e=>e.app.hideUnavailableProxies,ct=e=>e.app.autoCloseOldConns,it=function(e,t){let n;return(...o)=>{n&&clearTimeout(n),n=setTimeout((()=>{e(...o)}),t)}}(Me,600);function pt(e,{baseURL:t,secret:n}){const o=tt(e());for(let r=0;r<o.length;r++){const e=o[r];if(e.baseURL===t&&e.secret===n)return r}}const ut=document.querySelector("html"),dt=document.querySelector('meta[name="theme-color"]');function mt(e="dark"){"dark"===e?(ut.setAttribute("data-theme","dark"),dt.setAttribute("content","#202020")):(ut.setAttribute("data-theme","light"),dt.setAttribute("content","#eeeeee"))}function ht(e,t){return(n,o)=>{n("appUpdateAppConfig",(n=>{n.app[e]=t})),Me(o().app)}}const ft={selectedClashAPIConfigIndex:0,clashAPIConfigs:[{baseURL:null!=(t=null==(e=document.getElementById("app"))?void 0:e.getAttribute("data-base-url"))?t:"http://127.0.0.1:8030",secret:"",addedAt:0}],latencyTestUrl:"http://www.gstatic.com/generate_204",selectedChartStyleIndex:0,theme:"dark",collapsibleIsOpen:{},proxySortBy:"Natural",hideUnavailableProxies:!1,autoCloseOldConns:!1};var gt="_root_dn70c_1",xt="_mono_dn70c_10",wt="_link_dn70c_14";function yt({name:e,link:t,version:n}){return E.exports.createElement("div",{className:gt},E.exports.createElement("h2",null,e),E.exports.createElement("p",null,E.exports.createElement("span",null,"Version "),E.exports.createElement("span",{className:xt},n)),E.exports.createElement("p",null,E.exports.createElement("a",{className:wt,href:t,target:"_blank",rel:"noopener noreferrer"},E.exports.createElement(_,{size:20}),E.exports.createElement("span",null,"Source"))))}const bt=Ae((e=>({apiConfig:Xe(e)})))((function(e){const{data:t}=b(["/version",e.apiConfig],(()=>async function(e,t){let n={};try{const{url:o,init:r}=ge(t),a=await fetch(o+e,r);a.ok&&(n=await a.json())}catch(o){console.log(`failed to fetch ${e}`,o)}return n}("/version",e.apiConfig)));return E.exports.createElement(E.exports.Fragment,null,E.exports.createElement(Ee,{title:"About"}),t&&t.version?E.exports.createElement(yt,{name:"Clash",version:t.version,link:"https://github.com/Dreamacro/clash"}):null,E.exports.createElement(yt,{name:"Yacd",version:"0.3.3",link:"https://github.com/haishanh/yacd"}))}));var Et="_loading_74j3j_1",_t="_spinner_74j3j_9";const vt=({height:e})=>{const t=e?{height:e}:{};return x.createElement("div",{className:Et,style:t},x.createElement("div",{className:_t}))};const Ct=Ae((e=>({apiConfig:Xe(e),apiConfigs:tt(e)})))((function({apiConfig:e,apiConfigs:t}){return E.exports.useEffect((()=>{let n="yacd";if(t.length>1)try{n=`${new URL(e.baseURL).host} - yacd`}catch(o){}document.title=n})),E.exports.createElement(E.exports.Fragment,null)})),kt=new C({queryCache:new v,defaultOptions:{queries:{suspense:!0}}}),Nt=e=>e.logs.logs,Lt=e=>e.logs.tail,St=e=>e.logs.searchText,Rt=k(Nt,Lt,St,((e,t,n)=>{const o=[];for(let r=t;r>=0;r--)o.push(e[r]);if(300===e.length)for(let r=299;r>t;r--)o.push(e[r]);return""===n?o:o.filter((e=>e.payload.toLowerCase().indexOf(n)>=0))}));function Pt(e){return t=>{t("logsUpdateSearchText",(t=>{t.logs.searchText=e.toLowerCase()}))}}function Ot(e){return(t,n)=>{const o=n(),r=Nt(o),a=Lt(o),s=a>=299?0:a+1;r[s]=e,t("logsAppendLog",(e=>{e.logs.tail=s}))}}const It=[];let Tt;function Ut(e,t){if(1===Tt&&t)return At(t);Tt=1;const n=xe(e,"/connections"),o=new WebSocket(n);return o.addEventListener("error",(()=>Tt=3)),o.addEventListener("message",(e=>function(e){let t;try{t=JSON.parse(e)}catch(n){console.log("JSON.parse error",JSON.parse(e))}It.forEach((e=>e(t)))}(e.data))),t?At(t):void 0}function At(e){return It.push(e),function(){const t=It.indexOf(e);It.splice(t,1)}}async function jt(e){const{url:t,init:n}=ge(e);return await fetch(t+"/connections",p(i({},n),{method:"DELETE"}))}async function Dt(e){const{url:t,init:n}=ge(e),o=await fetch(t+"/proxies",n);return await o.json()}async function Mt(e){const{url:t,init:n}=ge(e),o=await fetch(t+"/providers/proxies",n);return 404===o.status?{providers:{}}:await o.json()}async function Bt(e,t){const{url:n,init:o}=ge(e),r=p(i({},o),{method:"PUT"});return await fetch(n+"/providers/proxies/"+t,r)}const $t=()=>null,zt=["Direct","Fallback","Reject","Selector","URLTest","LoadBalance","Unknown"],Wt=e=>e.proxies.proxies,Jt=e=>e.proxies.delay,Ft=e=>e.proxies.groupNames,qt=e=>e.proxies.proxyProviders||[],Vt=e=>e.proxies.dangleProxyNames,Gt=e=>e.proxies.showModalClosePrevConns;function Ht(e){return async(t,n)=>{const[o,r]=await Promise.all([Dt(e),Mt(e)]),{providers:a,proxies:s}=function(e){const t=Object.keys(e),n=[],o={};for(let r=0;r<t.length;r++){const a=e[t[r]];if("default"===a.name||"Compatible"===a.vehicleType)continue;const s=a.proxies,l=[];for(let e=0;e<s.length;e++){const t=s[e];o[t.name]=t,l.push(t.name)}a.proxies=l,n.push(a)}return{providers:n,proxies:o}}(r.providers),l=i(i({},s),o.proxies),[c,p]=function(e){let t,n=[];const o=[];for(const r in e){const a=e[r];a.all&&Array.isArray(a.all)?(n.push(r),"GLOBAL"===r&&(t=a.all)):zt.indexOf(a.type)<0&&o.push(r)}t&&(t.push("GLOBAL"),n=n.map((e=>[t.indexOf(e),e])).sort(((e,t)=>e[0]-t[0])).map((e=>e[1])));return[n,o]}(l),u=Jt(n()),d=i({},u);for(let e=0;e<p.length;e++){const t=p[e],{history:n}=l[t]||{history:[]},o=n[n.length-1];o&&"number"==typeof o.delay&&(d[t]={number:o.delay})}const m=[];for(const e of p)s[e]||m.push(e);t("store/proxies#fetchProxies",(e=>{e.proxies.proxies=l,e.proxies.groupNames=c,e.proxies.delay=d,e.proxies.proxyProviders=a,e.proxies.dangleProxyNames=m}))}}function Kt(e,t){return async n=>{try{await Bt(e,t)}catch(o){}n(Ht(e))}}function Qt(e,t){return async n=>{for(let r=0;r<t.length;r++)try{await Bt(e,t[r])}catch(o){}n(Ht(e))}}async function Yt(e,t){try{await async function(e,t){const{url:n,init:o}=ge(e),r=p(i({},o),{method:"GET"});return await fetch(n+"/providers/proxies/"+t+"/healthcheck",r)}(e,t)}catch(n){}}function Zt(e,t){return async n=>{await Yt(e,t),await n(Ht(e))}}async function Xt(e,t,n){const o=await async function(e){const{url:t,init:n}=ge(e);return await fetch(t+"/connections",i({},n))}(e);o.ok||console.log("unable to fetch all connections",o.statusText);const r=(await o.json()).connections,a=[];for(const s of r)s.chains.indexOf(t)>-1&&s.chains.indexOf(n)<0&&a.push(s.id);await Promise.all(a.map((t=>async function(e,t){const{url:n,init:o}=ge(e),r=`${n}/connections/${t}`;return await fetch(r,p(i({},o),{method:"DELETE"}))}(e,t).catch($t))))}async function en(e,t,n,o,r){try{if(!1===(await async function(e,t,n){const o={name:n},{url:r,init:a}=ge(e),s=`${r}/proxies/${t}`;return await fetch(s,p(i({},a),{method:"PUT",body:JSON.stringify(o)}))}(n,o,r)).ok)throw new Error("failed to switch proxy: res.statusText")}catch(a){throw console.log(a,"failed to swith proxy"),a}e(Ht(n));if(ct(t())){nn(n,Wt(t()),{groupName:o,itemName:r})}}function tn(){return e=>{e("closeModalClosePrevConns",(e=>{e.proxies.showModalClosePrevConns=!1}))}}function nn(e,t,n){const o=function(e,t,n){const o=[n,t];let r,a=n;for(;(r=e[a])&&r.now;)o.unshift(r.now),a=r.now;return o}(t,n.groupName,n.itemName);Xt(e,n.groupName,o[0])}function on(e,t,n){return async(o,r)=>{en(o,r,e,t,n).catch($t),o("store/proxies#switchProxy",(e=>{const o=e.proxies.proxies;o[t]&&o[t].now&&(o[t].now=n)}))}}function rn(e,t){return async(n,o)=>{const r=rt(o()),a=await async function(e,t,n="http://www.gstatic.com/generate_204"){const{url:o,init:r}=ge(e),a=`timeout=5000&url=${n}`,s=`${o}/proxies/${encodeURIComponent(t)}/delay?${a}`;return await fetch(s,r)}(e,t,r);let s="";!1===a.ok&&(s=a.statusText);const{delay:l}=await a.json(),c=Jt(o()),u=p(i({},c),{[t]:{error:s,number:l}});n("requestDelayForProxyOnce",(e=>{e.proxies.delay=u}))}}function an(e,t){return async n=>{await n(rn(e,t))}}function sn(e){return async(t,n)=>{const o=Vt(n());await Promise.all(o.map((n=>t(an(e,n)))));const r=qt(n());for(const a of r)await Yt(e,a.name);await t(Ht(e))}}const ln={requestDelayForProxies:function(e,t){return async(n,o)=>{const r=Vt(o()),a=t.filter((e=>r.indexOf(e)>-1)).map((t=>n(an(e,t))));await Promise.all(a),await n(Ht(e))}},closeModalClosePrevConns:tn,closePrevConnsAndTheModal:function(e){return async(t,n)=>{var o;const r=n(),a=null==(o=r.proxies.switchProxyCtx)?void 0:o.to;if(!a)return void t((e=>{e("closeModalClosePrevConns",(e=>{e.proxies.showModalClosePrevConns=!1}))}));const s=r.proxies.proxies;nn(e,s,a),t("closePrevConnsAndTheModal",(e=>{e.proxies.showModalClosePrevConns=!1,e.proxies.switchProxyCtx=void 0}))}}},cn=N({key:"proxyFilterText",default:""}),pn={app:function(){let e=function(){try{const e=localStorage.getItem("yacd.haishan.me");if(!e)return;return JSON.parse(e)}catch(e){return}}();e=i(i({},ft),e);const t=function(){const{search:e}=window.location,t={};if("string"!=typeof e||""===e)return t;const n=e.replace(/^\?/,"").split("&");for(let o=0;o<n.length;o++){const[e,r]=n[o].split("=");t[e]=encodeURIComponent(r)}return t}(),n=e.clashAPIConfigs[e.selectedClashAPIConfigIndex];if(n){const e=new URL(n.baseURL);t.hostname&&(e.hostname=t.hostname),t.port&&(e.port=t.port),n.baseURL=de(e.href),t.secret&&(n.secret=t.secret)}return"dark"!==t.theme&&"light"!==t.theme||(e.theme=t.theme),mt(e.theme),e}(),modals:{apiConfig:!1},configs:{configs:{port:7890,"socks-port":7891,"redir-port":0,"allow-lan":!1,mode:"Rule","log-level":"uninit"},haveFetchedConfig:!1},proxies:{proxies:{},delay:{},groupNames:[],showModalClosePrevConns:!1},logs:{searchText:"",logs:[],tail:-1}},un={selectChartStyleIndex:function(e){return(t,n)=>{t("appSelectChartStyleIndex",(t=>{t.app.selectedChartStyleIndex=Number(e)})),Me(n().app)}},updateAppConfig:ht,app:{updateCollapsibleIsOpen:function(e,t,n){return(o,r)=>{o("updateCollapsibleIsOpen",(o=>{o.app.collapsibleIsOpen[`${e}:${t}`]=n})),it(r().app)}},updateAppConfig:ht,removeClashAPIConfig:function({baseURL:e,secret:t}){return async(n,o)=>{const r=pt(o,{baseURL:e,secret:t});n("removeClashAPIConfig",(e=>{e.app.clashAPIConfigs.splice(r,1)})),Me(o().app)}},selectClashAPIConfig:function({baseURL:e,secret:t}){return async(n,o)=>{const r=pt(o,{baseURL:e,secret:t});et(o())!==r&&n("selectClashAPIConfig",(e=>{e.app.selectedClashAPIConfigIndex=r})),Me(o().app);try{window.location.reload()}catch(a){}}}},proxies:ln},{useState:dn,useCallback:mn}=x;var hn={ul:"_ul_1d6f2_1",li:"_li_1d6f2_10",close:"_close_1d6f2_28",eye:"_eye_1d6f2_36",hasSecret:"_hasSecret_1d6f2_45",url:"_url_1d6f2_50",secret:"_secret_1d6f2_54",btn:"_btn_1d6f2_72"};const fn=Ae((e=>({apiConfigs:tt(e),selectedClashAPIConfigIndex:et(e)})))((function({apiConfigs:e,selectedClashAPIConfigIndex:t}){const{app:{removeClashAPIConfig:n,selectClashAPIConfig:o}}=Te(),r=E.exports.useCallback((e=>{n(e)}),[n]),a=E.exports.useCallback((e=>{o(e)}),[o]);return E.exports.createElement(E.exports.Fragment,null,E.exports.createElement("ul",{className:hn.ul},e.map(((e,n)=>E.exports.createElement("li",{className:L(hn.li,{[hn.hasSecret]:e.secret,[hn.isSelected]:n===t}),key:e.baseURL+e.secret},E.exports.createElement(gn,{disableRemove:n===t,baseURL:e.baseURL,secret:e.secret,onRemove:r,onSelect:a}))))))}));function gn({baseURL:e,secret:t,disableRemove:n,onRemove:o,onSelect:r}){const[a,s]=function(e=!1){const[t,n]=dn(e);return[t,mn((()=>n((e=>!e))),[])]}(),l=a?R:P,c=E.exports.useCallback((e=>{e.stopPropagation()}),[]);return E.exports.createElement(E.exports.Fragment,null,E.exports.createElement(xn,{disabled:n,onClick:()=>o({baseURL:e,secret:t}),className:hn.close},E.exports.createElement(S,{size:20})),E.exports.createElement("span",{className:hn.url,tabIndex:0,role:"button",onClick:()=>r({baseURL:e,secret:t}),onKeyUp:c},e),E.exports.createElement("span",null),t?E.exports.createElement(E.exports.Fragment,null,E.exports.createElement("span",{className:hn.secret},a?t:"***"),E.exports.createElement(xn,{onClick:s,className:hn.eye},E.exports.createElement(l,{size:20}))):null)}function xn({children:e,onClick:t,className:n,disabled:o}){return E.exports.createElement("button",{disabled:o,className:L(n,hn.btn),onClick:t},e)}var wn="_root_zwtea_1",yn="_header_zwtea_5",bn="_icon_zwtea_10",En="_body_zwtea_20",_n="_hostnamePort_zwtea_24",vn="_error_zwtea_36",Cn="_footer_zwtea_42";var kn="_btn_1h2nv_1",Nn="_minimal_1h2nv_34",Ln="_btnStart_1h2nv_51",Sn="_loadingContainer_1h2nv_58";var Rn="_sectionNameType_1w5id_1",Pn="_loadingDot_1w5id_65";function On({name:e,type:t}){return x.createElement("h2",{className:Rn},x.createElement("span",null,e),x.createElement("span",null,t))}function In(){return x.createElement("span",{className:Pn})}const{forwardRef:Tn,useCallback:Un}=O;function An({children:e,label:t,text:n,start:o}){return E.exports.createElement(E.exports.Fragment,null,o?E.exports.createElement("span",{className:Ln},"function"==typeof o?o():o):null,e||t||n)}var jn=Tn((function(e,t){const n=e,{onClick:o,disabled:r=!1,isLoading:a,kind:s="primary",className:l,children:c,label:p,text:d,start:m}=n,h=u(n,["onClick","disabled","isLoading","kind","className","children","label","text","start"]),f={children:c,label:p,text:d,start:m},g=Un((e=>{a||o&&o(e)}),[a,o]),x=L(kn,{[Nn]:"minimal"===s},l);return E.exports.createElement("button",i({className:x,ref:t,onClick:g,disabled:r},h),a?E.exports.createElement(E.exports.Fragment,null,E.exports.createElement("span",{style:{display:"inline-flex",opacity:0}},E.exports.createElement(An,i({},f))),E.exports.createElement("span",{className:Sn},E.exports.createElement(In,null))):E.exports.createElement(An,i({},f)))}));var Dn="_root_1or8t_1",Mn="_floatAbove_1or8t_32";const{useCallback:Bn}=O;function $n(e){var t=e,{id:n,label:o,value:r,onChange:a}=t,s=u(t,["id","label","value","onChange"]);const l=Bn((e=>a(e)),[a]);return E.exports.createElement("div",{className:Dn},E.exports.createElement("input",i({id:n,value:r,onChange:l},s)),E.exports.createElement("label",{htmlFor:n,className:Mn},o))}var zn="_path_r8pm3_1";function Wn({width:e=320,height:t=320,animate:n=!1,c0:o="currentColor",stroke:r="#eee",eye:a="#eee",mouth:s="#eee"}){const l=L({[zn]:n});return E.exports.createElement("svg",{width:e,height:t,viewBox:"0 0 320 320",xmlns:"http://www.w3.org/2000/svg"},E.exports.createElement("g",{fill:"none",fillRule:"evenodd"},E.exports.createElement("path",{d:"M71.689 53.055c9.23-1.487 25.684 27.263 41.411 56.663 18.572-8.017 71.708-7.717 93.775 0 4.714-15.612 31.96-57.405 41.626-56.663 3.992.088 13.07 31.705 23.309 94.96 2.743 16.949 7.537 47.492 14.38 91.63-42.339 17.834-84.37 26.751-126.095 26.751-41.724 0-83.756-8.917-126.095-26.751C52.973 116.244 65.536 54.047 71.689 53.055z",stroke:r,strokeWidth:"4",strokeLinecap:"round",fill:o,className:l}),E.exports.createElement("circle",{fill:a,cx:"216.5",cy:"181.5",r:"14.5"}),E.exports.createElement("circle",{fill:a,cx:"104.5",cy:"181.5",r:"14.5"}),E.exports.createElement("g",{stroke:s,strokeLinecap:"round",strokeWidth:"4"},E.exports.createElement("path",{d:"M175.568 218.694c-2.494 1.582-5.534 2.207-8.563 1.508-3.029-.7-5.487-2.594-7.035-5.11M143.981 218.694c2.494 1.582 5.534 2.207 8.563 1.508 3.03-.7 5.488-2.594 7.036-5.11"}))))}const{useState:Jn,useRef:Fn,useCallback:qn,useEffect:Vn}=O;var Gn=Ae((e=>({apiConfig:Xe(e)})))((function({dispatch:e}){const[t,n]=Jn(""),[o,r]=Jn(""),[a,s]=Jn(""),l=Fn(!1),c=Fn(null),i=qn((e=>{l.current=!0,s("");const t=e.target,{name:o}=t,a=t.value;switch(o){case"baseURL":n(a);break;case"secret":r(a);break;default:throw new Error(`unknown input name ${o}`)}}),[]),p=qn((()=>{(async function(e){try{new URL(e.baseURL)}catch(t){if(e.baseURL){const t=e.baseURL.substring(0,7);if("http://"!==t&&"https:/"!==t)return[1,"Must starts with http:// or https://"]}return[1,"Invalid URL"]}try{const t=await Be(e);return t.status>399?[1,t.statusText]:[0]}catch(t){return[1,"Failed to connect"]}})({baseURL:t,secret:o}).then((n=>{0!==n[0]?s(n[1]):e(function({baseURL:e,secret:t}){return async(n,o)=>{if(pt(o,{baseURL:e,secret:t}))return;const r={baseURL:e,secret:t,addedAt:Date.now()};n("addClashAPIConfig",(e=>{e.app.clashAPIConfigs.push(r)})),Me(o().app)}}({baseURL:t,secret:o}))}))}),[t,o,e]),u=qn((e=>{e.target instanceof Element&&(!e.target.tagName||"INPUT"!==e.target.tagName.toUpperCase())||"Enter"===e.key&&p()}),[p]);return Vn((()=>{(async()=>{(await fetch("/")).json().then((e=>{"clash"===e.hello&&n(window.location.origin)}))})()}),[]),E.exports.createElement("div",{className:wn,ref:c,onKeyDown:u},E.exports.createElement("div",{className:yn},E.exports.createElement("div",{className:bn},E.exports.createElement(Wn,{width:160,height:160,stroke:"var(--stroke)"}))),E.exports.createElement("div",{className:En},E.exports.createElement("div",{className:_n},E.exports.createElement($n,{id:"baseURL",name:"baseURL",label:"API Base URL",type:"text",placeholder:"http://127.0.0.1:8030",value:t,onChange:i}),E.exports.createElement($n,{id:"secret",name:"secret",label:"Secret(optional)",value:o,type:"text",onChange:i}))),E.exports.createElement("div",{className:vn},a||null),E.exports.createElement("div",{className:Cn},E.exports.createElement(jn,{label:"Add",onClick:p})),E.exports.createElement("div",{style:{height:20}}),E.exports.createElement(fn,null))}));const Hn=function(e){let t={};const n={},o={};function r(r="default"){return n[r]=e(r).then((e=>{delete n[r],t[r]=e})).catch((e=>{o[r]=e})),n[r]}return{preload:function(e="default"){void 0!==t[e]||n[e]||r(e)},read:function(e="default"){if(void 0!==t[e])return t[e];throw o[e]?o[e]:n[e]?n[e]:r(e)},clear:function(e){e?delete t[e]:t={}}}}((()=>pe((()=>import("./index.6f1aa6cf.js")),["assets/index.6f1aa6cf.js","assets/vendor.57c26bf4.js"])));var Kn="_iconWrapper_5pz1j_1",Qn="_themeSwitchContainer_5pz1j_23";function Yn(){const e=Hn.read().motion;return E.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},E.exports.createElement(e.path,{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",initial:{rotate:-30},animate:{rotate:0},transition:{duration:.7}}))}function Zn(){const e=Hn.read().motion;return E.exports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},E.exports.createElement("circle",{cx:"12",cy:"12",r:"5"}),E.exports.createElement(e.g,{initial:{scale:.8},animate:{scale:1},transition:{duration:.7}},E.exports.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),E.exports.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),E.exports.createElement("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),E.exports.createElement("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),E.exports.createElement("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),E.exports.createElement("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),E.exports.createElement("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),E.exports.createElement("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})))}const Xn=Ae((e=>({theme:nt(e)})))((function({theme:e,dispatch:t}){const{t:n}=I(),o=E.exports.useCallback((()=>{t(((e,t)=>{const n="light"===nt(t())?"dark":"light";mt(n),e("storeSwitchTheme",(e=>{e.app.theme=n})),Me(t().app)}))}),[t]);return E.exports.createElement(T,{label:n("theme"),"aria-label":"switch to "+("light"===e?"dark":"light")+" theme"},E.exports.createElement("button",{className:L(Kn,Qn),onClick:o},"light"===e?E.exports.createElement(Yn,null):E.exports.createElement(Zn,null)))})),eo={0:{message:"Browser not supported!",detail:'This browser does not support "fetch", please choose another one.'},default:{message:"Oops, something went wrong!"}};var to="_content_b98hm_1",no="_container_b98hm_16",oo="_overlay_b98hm_22",ro="_fixed_b98hm_26";var ao={overlay:"_overlay_85t19_1",content:"_content_85t19_11"};var so=E.exports.memo((function(e){var t=e,{isOpen:n,onRequestClose:o,className:r,overlayClassName:a,children:s}=t,l=u(t,["isOpen","onRequestClose","className","overlayClassName","children"]);const c=L(r,ao.content),p=L(a,ao.overlay);return E.exports.createElement(U,i({isOpen:n,onRequestClose:o,className:c,overlayClassName:p},l),s)}));const{useCallback:lo,useEffect:co}=O;var io=Ae((e=>({modals:e.modals,apiConfig:Xe(e)})))((function({dispatch:e,apiConfig:t,modals:n}){if(!window.fetch){const{detail:e}=eo[0],t=new Error(e);throw t.code=0,t}const o=lo((()=>{var t;e((t="apiConfig",e=>{e(`closeModal:${t}`,(e=>{e.modals[t]=!1}))}))}),[e]);return co((()=>{e(Ye(t))}),[e,t]),E.exports.createElement(so,{isOpen:n.apiConfig,className:to,overlayClassName:oo,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,onRequestClose:o},E.exports.createElement("div",{className:no},E.exports.createElement(Gn,null)),E.exports.createElement("div",{className:ro},E.exports.createElement(Xn,null)))}));var po="_root_4m2cd_1",uo="_yacd_4m2cd_14",mo="_link_4m2cd_23";function ho({width:e=24,height:t=24}={}){return x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},x.createElement("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"}))}function fo({message:e,detail:t}){return x.createElement("div",{className:po},x.createElement("div",{className:uo},x.createElement(Wn,{width:150,height:150})),e?x.createElement("h1",null,e):null,t?x.createElement("p",null,t):null,x.createElement("p",null,x.createElement("a",{className:mo,href:"https://github.com/haishanh/yacd/issues"},x.createElement(ho,{width:16,height:16}),"haishanh/yacd")))}class go extends E.exports.Component{constructor(){var e;super(...arguments),c(this,"symbol"!=typeof(e="state")?e+"":e,{error:null})}static getDerivedStateFromError(e){return{error:e}}render(){if(this.state.error){const{message:e,detail:t}=function(e){const{code:t}=e;return"number"==typeof t?eo[t]:eo.default}(this.state.error);return E.exports.createElement(fo,{message:e,detail:t})}return this.props.children}}var xo={root:"_root_ecp08_1"};const wo=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function yo(e){if(e<1e3)return e+" B";const t=Math.min(Math.floor(Math.log10(e)/3),wo.length-1);return(e=Number((e/Math.pow(1e3,t)).toPrecision(3)))+" "+wo[t]}const bo=A.exports.unstable_createResource((()=>pe((()=>import("./Chart.min.48c71032.js").then((function(e){return e.C}))),["assets/Chart.min.48c71032.js","assets/vendor.57c26bf4.js"]).then((e=>e.default)))),Eo={borderWidth:1,lineTension:0,pointRadius:0},_o={responsive:!0,maintainAspectRatio:!0,title:{display:!1},legend:{display:!0,position:"top",labels:{fontColor:"#ccc",boxWidth:20}},tooltips:{enabled:!1,mode:"index",intersect:!1,animationDuration:100},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!1,gridLines:{display:!1}}],yAxes:[{display:!0,gridLines:{display:!0,color:"#555",borderDash:[3,6],drawBorder:!1},ticks:{callback:e=>yo(e)+"/s "}}]}},vo=[{down:{backgroundColor:"rgba(176, 209, 132, 0.8)",borderColor:"rgb(176, 209, 132)"},up:{backgroundColor:"rgba(181, 220, 231, 0.8)",borderColor:"rgb(181, 220, 231)"}},{up:{backgroundColor:"rgb(98, 190, 100)",borderColor:"rgb(78,146,79)"},down:{backgroundColor:"rgb(160, 230, 66)",borderColor:"rgb(110, 156, 44)"}},{up:{backgroundColor:"rgba(94, 175, 223, 0.3)",borderColor:"rgb(94, 175, 223)"},down:{backgroundColor:"rgba(139, 227, 195, 0.3)",borderColor:"rgb(139, 227, 195)"}},{up:{backgroundColor:"rgba(242, 174, 62, 0.3)",borderColor:"rgb(242, 174, 62)"},down:{backgroundColor:"rgba(69, 154, 248, 0.3)",borderColor:"rgb(69, 154, 248)"}}],{useEffect:Co}=x,ko=_o;function No(e,t,n,o,r={}){Co((()=>{const a=document.getElementById(t).getContext("2d"),s=new e(a,{type:"line",data:n,options:i(i({},ko),r)}),l=o&&o.subscribe((()=>s.update()));return()=>{l&&l(),s.destroy()}}),[e,t,n,o,r])}const{useMemo:Lo}=O,So={position:"relative",maxWidth:1e3};var Ro=Ae((e=>({apiConfig:Xe(e),selectedChartStyleIndex:ot(e)})))((function({apiConfig:e,selectedChartStyleIndex:t}){const n=bo.read(),o=Ge(e),{t:r}=I(),a=Lo((()=>({labels:o.labels,datasets:[p(i(i({},Eo),vo[t].up),{label:r("Up"),data:o.up}),p(i(i({},Eo),vo[t].down),{label:r("Down"),data:o.down})]})),[o,t,r]);return No(n,"trafficChart",a,o),E.exports.createElement("div",{style:So},E.exports.createElement("canvas",{id:"trafficChart"}))}));var Po="_TrafficNow_1wdp6_1",Oo="_sec_1wdp6_7";const{useState:Io,useEffect:To,useCallback:Uo}=O;var Ao=Ae((e=>({apiConfig:Xe(e)})))((function({apiConfig:e}){const{t:t}=I(),{upStr:n,downStr:o}=function(e){const[t,n]=Io({upStr:"0 B/s",downStr:"0 B/s"});return To((()=>Ge(e).subscribe((e=>n({upStr:yo(e.up)+"/s",downStr:yo(e.down)+"/s"})))),[e]),t}(e),{upTotal:r,dlTotal:a,connNumber:s}=function(e){const[t,n]=Io({upTotal:"0 B",dlTotal:"0 B",connNumber:0}),o=Uo((({downloadTotal:e,uploadTotal:t,connections:o})=>{n({upTotal:yo(t),dlTotal:yo(e),connNumber:o.length})}),[n]);return To((()=>Ut(e,o)),[e,o]),t}(e);return E.exports.createElement("div",{className:Po},E.exports.createElement("div",{className:Oo},E.exports.createElement("div",null,t("Upload")),E.exports.createElement("div",null,n)),E.exports.createElement("div",{className:Oo},E.exports.createElement("div",null,t("Download")),E.exports.createElement("div",null,o)),E.exports.createElement("div",{className:Oo},E.exports.createElement("div",null,t("Upload Total")),E.exports.createElement("div",null,r)),E.exports.createElement("div",{className:Oo},E.exports.createElement("div",null,t("Download Total")),E.exports.createElement("div",null,a)),E.exports.createElement("div",{className:Oo},E.exports.createElement("div",null,t("Active Connections")),E.exports.createElement("div",null,s)))}));function jo(){const{t:e}=I();return x.createElement("div",null,x.createElement(Ee,{title:e("Overview")}),x.createElement("div",{className:xo.root},x.createElement("div",null,x.createElement(Ao,null)),x.createElement("div",{className:xo.chart},x.createElement(E.exports.Suspense,{fallback:x.createElement(vt,{height:"200px"})},x.createElement(Ro,null)))))}var Do="_lo_pmly2_1";function Mo(){return x.createElement("div",{className:Do},x.createElement(Wn,{width:280,height:280,animate:!0,c0:"transparent",c1:"#646464"}))}var Bo="_app_1q2jw_1",$o="_content_1q2jw_17";var zo="_root_wh224_1",Wo="_logoPlaceholder_wh224_7",Jo="_rows_wh224_17",Fo="_row_wh224_17",qo="_rowActive_wh224_54",Vo="_label_wh224_64",Go="_footer_wh224_80",Ho="_iconWrapper_wh224_92";const Ko={activity:D,globe:M,command:B,file:$,settings:z,link:W},Qo=E.exports.memo((function({isActive:e,to:t,iconId:n,labelText:o}){const r=Ko[n],a=L(Fo,e?qo:null);return E.exports.createElement(j,{to:t,className:a},E.exports.createElement(r,null),E.exports.createElement("div",{className:Vo},o))})),Yo=[{to:"/",iconId:"activity",labelText:"Overview"},{to:"/proxies",iconId:"globe",labelText:"Proxies"},{to:"/rules",iconId:"command",labelText:"Rules"},{to:"/connections",iconId:"link",labelText:"Conns"},{to:"/configs",iconId:"settings",labelText:"Config"},{to:"/logs",iconId:"file",labelText:"Logs"}];function Zo(){const{t:e}=I(),t=J();return E.exports.createElement("div",{className:zo},E.exports.createElement("div",{className:Wo}),E.exports.createElement("div",{className:Jo},Yo.map((({to:n,iconId:o,labelText:r})=>E.exports.createElement(Qo,{key:n,to:n,isActive:t.pathname===n,iconId:o,labelText:e(r)})))),E.exports.createElement("div",{className:Go},E.exports.createElement(Xn,null),E.exports.createElement(T,{label:e("about")},E.exports.createElement(j,{to:"/about",className:Ho},E.exports.createElement(F,{size:20})))))}var Xo={input:"_input_4ejw0_1"};const er=q.default?q.default:q;var tr=Ae((e=>({theme:nt(e)})))((function({checked:e=!1,onChange:t,theme:n,name:o}){const r="dark"===n?"#393939":"#e9e9e9";return x.createElement(er,{onChange:t,checked:e,uncheckedIcon:!1,checkedIcon:!1,offColor:r,onColor:"#047aff",offHandleColor:"#fff",onHandleColor:"#fff",handleDiameter:24,height:28,width:44,className:"rs",name:o})}));var nr="_ToggleSwitch_10mtp_1",or="_slider_10mtp_28";x.memo((function({options:e,value:t,name:n,onChange:o}){const r=E.exports.useMemo((()=>e.map((e=>e.value)).indexOf(t)),[e,t]),a=E.exports.useCallback((t=>{const n=Math.floor(100/e.length);return t===e.length-1?100-e.length*n+n:t>-1?n:void 0}),[e]),s=E.exports.useMemo((()=>({width:a(r)+"%",left:r*a(0)+"%"})),[r,a]);return x.createElement("div",{className:nr},x.createElement("div",{className:or,style:s}),e.map(((e,r)=>{const s=`${n}-${e.label}`,l=0===r?"":"border-left";return x.createElement("label",{htmlFor:s,key:s,className:l,style:{width:a(r)+"%"}},x.createElement("input",{id:s,name:n,type:"radio",value:e.value,checked:t===e.value,onChange:o}),x.createElement("div",null,e.label))})))}));const rr=E.exports.lazy((()=>pe((()=>import("./Connections.fdb81d1e.js")),["assets/Connections.fdb81d1e.js","assets/Connections.48138f3b.css","assets/vendor.57c26bf4.js","assets/useRemainingViewPortHeight.6cd5bb98.js","assets/Fab.8ad70120.js","assets/Fab.44f13fef.css"]))),ar=E.exports.lazy((()=>pe((()=>import("./Config.7418ac6a.js")),["assets/Config.7418ac6a.js","assets/Config.58870520.css","assets/vendor.57c26bf4.js","assets/logs.0cd5c8b4.js","assets/Select.dbcac11f.js","assets/Select.9a98fc65.css"]))),sr=E.exports.lazy((()=>pe((()=>import("./Logs.18a819cb.js")),["assets/Logs.18a819cb.js","assets/Logs.6851de94.css","assets/vendor.57c26bf4.js","assets/index.esm.27024fe8.js","assets/logs.0cd5c8b4.js","assets/debounce.cc85a806.js","assets/useRemainingViewPortHeight.6cd5bb98.js"]))),lr=E.exports.lazy((()=>pe((()=>import("./Proxies.fb5b05c0.js")),["assets/Proxies.fb5b05c0.js","assets/Proxies.568ae8cd.css","assets/vendor.57c26bf4.js","assets/Fab.8ad70120.js","assets/Fab.44f13fef.css","assets/TextFitler.b8bacbdc.js","assets/TextFitler.3d9182a0.css","assets/debounce.cc85a806.js","assets/Select.dbcac11f.js","assets/Select.9a98fc65.css"]))),cr=E.exports.lazy((()=>pe((()=>import("./Rules.e54422be.js")),["assets/Rules.e54422be.js","assets/Rules.a609ca62.css","assets/vendor.57c26bf4.js","assets/index.esm.27024fe8.js","assets/TextFitler.b8bacbdc.js","assets/TextFitler.3d9182a0.css","assets/debounce.cc85a806.js","assets/Fab.8ad70120.js","assets/Fab.44f13fef.css","assets/useRemainingViewPortHeight.6cd5bb98.js"]))),ir=[{path:"/",element:x.createElement(jo,null)},{path:"/connections",element:x.createElement(rr,null)},{path:"/configs",element:x.createElement(ar,null)},{path:"/logs",element:x.createElement(sr,null)},{path:"/proxies",element:x.createElement(lr,null)},{path:"/rules",element:x.createElement(cr,null)},{path:"/about",element:x.createElement(bt,null)},!1].filter(Boolean);function pr(){return K(ir)}function ur(){return x.createElement(x.Fragment,null,x.createElement(io,null),x.createElement(Zo,null),x.createElement("div",{className:$o},x.createElement(E.exports.Suspense,{fallback:x.createElement(Mo,null)},x.createElement(pr,null))))}function dr(){return K([{path:"/backend",element:x.createElement(Gn,null)},{path:"*",element:x.createElement(ur,null)}])}const mr=()=>x.createElement(go,null,x.createElement(V,null,x.createElement(Ue,{initialState:pn,actions:un},x.createElement(G,{client:kt},x.createElement(H,null,x.createElement("div",{className:Bo},x.createElement(Ct,null),x.createElement(E.exports.Suspense,{fallback:x.createElement(vt,null)},x.createElement(dr,null)))))))),hr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fr(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}const gr=document.getElementById("app");U.setAppElement(gr),Q.render(x.createElement(x.StrictMode,null,x.createElement(mr,null)),gr),function(e){if("serviceWorker"in navigator){if(new URL("./",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t=".//sw.js";hr?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):fr(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker")}))):fr(t,e)}))}}(),console.log("Checkout the repo: https://github.com/haishanh/yacd"),console.log("Version:","0.3.3");export{Qe as A,jn as B,Ee as C,On as D,cn as E,Wt as F,Jt as G,on as H,at as I,st as J,lt as K,Kt as L,Qt as M,zt as N,sn as O,Hn as P,Zt as Q,ct as R,Wn as S,Ht as T,Ft as U,qt as V,Gt as W,jt as a,bo as b,Ae as c,Eo as d,vo as e,Ut as f,Xe as g,Ye as h,Ze as i,Te as j,tr as k,Ke as l,ao as m,ot as n,He as o,yo as p,rt as q,we as r,Xo as s,ge as t,No as u,me as v,St as w,Pt as x,Ot as y,Rt as z};
